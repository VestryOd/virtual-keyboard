!function(e){var t={};function n(a){if(t[a])return t[a].exports;var s=t[a]={i:a,l:!1,exports:{}};return e[a].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(a,s,function(t){return e[t]}.bind(null,s));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){n(2),e.exports=n(1)},function(e,t,n){},function(e,t,n){"use strict";function a(e,t){var n,a=e;a=document.createElement(t);for(var s=arguments.length,o=new Array(s>2?s-2:0),r=2;r<s;r++)o[r-2]=arguments[r];return(n=a.classList).add.apply(n,o),a}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}n.r(t);var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,o;return t=e,(n=[{key:"generateCheckbox",value:function(){var e=a(e,"div","checbox__wrapper");return e.innerHTML='<label for="animation-toggler">Animate </label>\n                                <input type = "checkbox" id = "animation-toggler" />',e}},{key:"generateTitle",value:function(){var e=a(e,"h1","header");return e.innerHTML="RS-School task Virtual Keyboard",e}},{key:"generateDescription",value:function(){var e=a(e,"div","description__wrapper"),t=a(t,"div","info");t.innerHTML="Created on Win OS / lang switch: left Ctrl + Alt or globe icon";var n=this.generateOptions();return e.append(t,n),e}},{key:"generateOptions",value:function(){var e=a(e,"div","options__wrapper"),t=this.generateCheckbox(),n=this.generateClearTextareaButton();return e.append(t,n),e}},{key:"generateClearTextareaButton",value:function(){var e=a(e,"button","options__clear");return e.innerHTML="Clear",e}},{key:"generateHeader",value:function(){var e=a(e,"div","header__wrapper"),t=this.generateTitle(),n=this.generateDescription();return e.append(t,n),e}}])&&s(t.prototype,n),o&&s(t,o),e}();function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.value="",this.textArea=null}var t,n,s;return t=e,(n=[{key:"generateTextArea",value:function(){var e=document.createElement("div");e.classList.add("textarea-wrapper");var t=a(t,"textarea","textarea");return t.setAttribute("id","textarea"),t.setAttribute("placeholder","Start typing to get started..."),t.setAttribute("autofocus",!0),this.textArea=t,e.append(t),e}},{key:"changeValue",value:function(e){var t=this.textArea.value;t+="&amp;"===e?"&":e,this.textArea.value=t}},{key:"removeValue",value:function(){var e=this.textArea.value,t=e.substring(0,e.length-1);this.textArea.value=t}},{key:"clearValue",value:function(){this.textArea.value=""}}])&&r(t.prototype,n),s&&r(t,s),e}();function u(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.code=t.code,this.classes=t.classes,this.value=t.value,this.ru=null,this.eng=null,this.lang=null,this.case=null,this.keyButton=null,this.shifted=!1,this.capslocked=!1}var t,n,s;return t=e,(n=[{key:"generateButton",value:function(){var e=null;(e=a.apply(void 0,[e,"button","keyboard__key"].concat(u(this.classes)))).setAttribute("type","button"),e.setAttribute("data-code",this.code),this.keyButton=e,"string"==typeof this.value?this.makeSpecialbutton():this.makeSymbolButton()}},{key:"makeSpecialbutton",value:function(){this.keyButton.innerHTML=this.data.value}},{key:"makeSymbolButton",value:function(){this.ru=this.data.value.ru,this.en=this.data.value.en,this.lang=localStorage.getItem("keyboardLanguage")||"en",this.renderSymbolContent()}},{key:"checkCase",value:function(){this.case=this.capslocked&&!this.shifted||this.shifted&&!this.capslocked?"up":"down"}},{key:"renderSymbolContent",value:function(){null===this.case?this.case="down":this.checkCase(),this.keyButton.innerHTML=this[this.lang][this.case]}},{key:"switchLanguage",value:function(){this.lang=localStorage.getItem("keyboardLanguage"),this.renderSymbolContent()}},{key:"keyShifted",value:function(e){this.shifted=e,this.renderSymbolContent()}},{key:"keyCapslocked",value:function(e){this.capslocked=e,this.renderSymbolContent()}},{key:"makeKeyButton",value:function(){return this.generateButton(),this.keyButton}}])&&c(t.prototype,n),s&&c(t,s),e}();function h(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var p=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.defaultSet=t,this.exceptions=n,this.data=null,this.letters=[],this.digits=[],this.rootElement=null,this.keyBoard=null,this.textArea=null,this.header=null,this.pressedButtons=null,this.capslocked=!1}var t,n,s;return t=e,(n=[{key:"setRootElement",value:function(){var e=a(e,"div","main");this.rootElement=a(this.rootElement,"div","container"),e.append(this.rootElement),document.body.prepend(e)}},{key:"makeHeader",value:function(){this.header=(new o).generateHeader(),this.rootElement.append(this.header)}},{key:"makeTextArea",value:function(){this.textArea=new l,this.rootElement.append(this.textArea.generateTextArea())}},{key:"checkKeyObjectForClasses",value:function(e,t){var n=e.classes;n.includes("special")||(n.includes("letter")?this.letters.push(t):this.digits.push(t))}},{key:"generateKeyboard",value:function(){var e=this,t=this.defaultSet;this.keyBoard=a(this.keyBoard,"div","keyboard"),t.forEach((function(t){var n=new d(t);e.checkKeyObjectForClasses(t,n),e.keyBoard.append(n.makeKeyButton())})),this.rootElement.append(this.keyBoard)}},{key:"checkForExceptions",value:function(e){return this.exceptions.includes(e)}},{key:"checkForSwitchLang",value:function(){this.pressedButtons.has("ControlLeft")&&this.pressedButtons.has("AltLeft")&&this.switchLanguage()}},{key:"handleSymbolDown",value:function(e){var t=e.innerHTML;changeValue(t)}},{key:"toggleActiveClass",value:function(e){e.classList.toggle("active")}},{key:"getKeyCode",value:function(e){var t=e.code;return document.querySelector('.keyboard__key[data-code="'.concat(t,'"]'))}},{key:"checkForPressRepeating",value:function(e){var t=e.dataset.code;this.pressedButtons.has(t)||(this.pressedButtons.add(t),this.toggleActiveClass(e),this.checkForSwitchLang())}},{key:"clearPressedKey",value:function(e){var t=e.dataset.code;this.pressedButtons.has(t)&&(this.pressedButtons.delete(t),this.toggleActiveClass(e))}},{key:"addKeyDownListener",value:function(){var e=this;document.addEventListener("keydown",(function(t){var n=e.getKeyCode(t);e.checkForExceptions(t.code)||(t.preventDefault(),e.checkForPressRepeating(n),e.handleKeyDown(n))}))}},{key:"addKeyUpListener",value:function(){var e=this;document.addEventListener("keyup",(function(t){var n=e.getKeyCode(t);e.checkForExceptions(t.code)||(e.checkShiftUp(t.code),e.clearPressedKey(n))}))}},{key:"addMouseDownListener",value:function(){var e=this;this.keyBoard.addEventListener("mousedown",(function(t){e.handleKeyDown(t.target),e.toggleActiveClass(t.target)}))}},{key:"addMouseUpListener",value:function(){var e=this;this.keyBoard.addEventListener("mouseup",(function(t){var n=t.target.dataset.code;e.checkShiftUp(n),e.toggleActiveClass(t.target)}))}},{key:"checkShiftUp",value:function(e){"ShiftLeft"!==e&&"ShiftRight"!==e||this.shiftPressed(!1)}},{key:"addListeners",value:function(){this.addKeyDownListener(),this.addKeyUpListener(),this.addMouseDownListener(),this.addMouseUpListener(),this.addAnimationTogglerListener(),this.addClearTextareaButtonListener()}},{key:"switchLanguage",value:function(){localStorage.keyboardLanguage="ru"===localStorage.keyboardLanguage?"en":"ru",this.digits.forEach((function(e){return e.switchLanguage()})),this.letters.forEach((function(e){return e.switchLanguage()}))}},{key:"shiftPressed",value:function(e){this.letters.forEach((function(t){return t.keyShifted(e)})),this.digits.forEach((function(t){return t.keyShifted(e)}))}},{key:"capslockPressed",value:function(e){this.letters.forEach((function(t){return t.keyCapslocked(e)}))}},{key:"createKeyboardInstance",value:function(e){localStorage.keyboardLanguage||(localStorage.keyboardLanguage="ru"),this.data=e||this.defaultSet,this.setRootElement(),this.makeHeader(),this.makeTextArea(),this.generateKeyboard(),this.pressedButtons=new Set,this.addListeners()}},{key:"addAnimationTogglerListener",value:function(){var e=document.querySelector("#animation-toggler"),t=document.querySelector(".main");e.addEventListener("click",(function(e){e.target.checked?t.classList.add("motion-colors"):t.classList.remove("motion-colors")}))}},{key:"addClearTextareaButtonListener",value:function(){var e=this;document.querySelector(".options__clear").addEventListener("click",(function(){e.textArea.clearValue()}))}},{key:"handleSymbolDown",value:function(e){var t=e.innerHTML;this.textArea.changeValue(t)}},{key:"handleKeyDown",value:function(e){var t=e;t.classList.contains("keyboard__key")&&(t.classList.contains("special")?this.handleSpecialDown(t):this.handleSymbolDown(t))}},{key:"handleSpecialDown",value:function(e){switch(e.dataset.code){case"Space":this.textArea.changeValue(" ");break;case"ContextMenu":this.switchLanguage();break;case"Enter":this.textArea.changeValue("\n");break;case"Tab":this.textArea.changeValue("\t");break;case"Backspace":this.textArea.removeValue();break;case"ArrowLeft":this.textArea.changeValue("◄");break;case"ArrowDown":this.textArea.changeValue("▼");break;case"ArrowRight":this.textArea.changeValue("►");break;case"ArrowUp":this.textArea.changeValue("▲");break;case"CapsLock":this.capslocked=!this.capslocked,this.capslockPressed(this.capslocked);break;case"ShiftLeft":case"ShiftRight":this.shiftPressed(!0)}}}])&&h(t.prototype,n),s&&h(t,s),e}(),y=[{code:"Backquote",value:{ru:{down:"ё",up:"Ё"},en:{down:"`",up:"~"}},classes:["symbol","backquote","letter"]},{code:"Digit1",value:{ru:{down:"1",up:"!"},en:{down:"1",up:"!"}},classes:["symbol","digit"]},{code:"Digit2",value:{ru:{down:"2",up:"'"},en:{down:"2",up:"@"}},classes:["symbol","digit"]},{code:"Digit3",value:{ru:{down:"3",up:"№"},en:{down:"3",up:"#"}},classes:["symbol","digit"]},{code:"Digit4",value:{ru:{down:"4",up:";"},en:{down:"4",up:"$"}},classes:["symbol","digit"]},{code:"Digit5",value:{ru:{down:"5",up:"%"},en:{down:"5",up:"%"}},classes:["symbol","digit"]},{code:"Digit6",value:{ru:{down:"6",up:":"},en:{down:"6",up:"^"}},classes:["symbol","digit"]},{code:"Digit7",value:{ru:{down:"7",up:"?"},en:{down:"7",up:"&"}},classes:["symbol","digit"]},{code:"Digit8",value:{ru:{down:"8",up:"*"},en:{down:"8",up:"*"}},classes:["symbol","digit"]},{code:"Digit9",value:{ru:{down:"9",up:"("},en:{down:"9",up:"("}},classes:["symbol","digit"]},{code:"Digit0",value:{ru:{down:"0",up:")"},en:{down:"0",up:")"}},classes:["symbol","digit"]},{code:"Minus",value:{ru:{down:"-",up:"_"},en:{down:"-",up:"_"}},classes:["symbol","digit"]},{code:"Equal",value:{ru:{down:"=",up:"+"},en:{down:"=",up:"+"}},classes:["symbol","digit"]},{code:"Backspace",value:"Backspace",classes:["special","backspace"]},{code:"Tab",value:"Tab",classes:["special","tab"]},{code:"KeyQ",value:{ru:{down:"й",up:"Й"},en:{down:"q",up:"Q"}},classes:["symbol","letter"]},{code:"KeyW",value:{ru:{down:"ц",up:"Ц"},en:{down:"w",up:"W"}},classes:["symbol","letter"]},{code:"KeyE",value:{ru:{down:"у",up:"У"},en:{down:"e",up:"E"}},classes:["symbol","letter"]},{code:"KeyR",value:{ru:{down:"к",up:"К"},en:{down:"r",up:"R"}},classes:["symbol","letter"]},{code:"KeyT",value:{ru:{down:"е",up:"Е"},en:{down:"t",up:"T"}},classes:["symbol","letter"]},{code:"KeyY",value:{ru:{down:"н",up:"Н"},en:{down:"y",up:"Y"}},classes:["symbol","letter"]},{code:"KeyU",value:{ru:{down:"г",up:"Г"},en:{down:"u",up:"U"}},classes:["symbol","letter"]},{code:"KeyI",value:{ru:{down:"ш",up:"Ш"},en:{down:"i",up:"I"}},classes:["symbol","letter"]},{code:"KeyO",value:{ru:{down:"щ",up:"Щ"},en:{down:"o",up:"O"}},classes:["symbol","letter"]},{code:"KeyP",value:{ru:{down:"з",up:"З"},en:{down:"p",up:"P"}},classes:["symbol","letter"]},{code:"BracketLeft",value:{ru:{down:"х",up:"Х"},en:{down:"[",up:"{"}},classes:["symbol","letter"]},{code:"BracketRight",value:{ru:{down:"ъ",up:"Ъ"},en:{down:"]",up:"}"}},classes:["symbol","letter"]},{code:"Backslash",value:{ru:{down:"\\",up:"/"},en:{down:"\\",up:"|"}},classes:["symbol","letter"]},{code:"CapsLock",value:"CapsLock",classes:["special","capsLock"]},{code:"KeyA",value:{ru:{down:"ф",up:"Ф"},en:{down:"a",up:"A"}},classes:["symbol","letter"]},{code:"KeyS",value:{ru:{down:"ы",up:"Ы"},en:{down:"s",up:"S"}},classes:["symbol","letter"]},{code:"KeyD",value:{ru:{down:"в",up:"В"},en:{down:"d",up:"D"}},classes:["symbol","letter"]},{code:"KeyF",value:{ru:{down:"а",up:"А"},en:{down:"f",up:"F"}},classes:["symbol","letter"]},{code:"KeyG",value:{ru:{down:"п",up:"П"},en:{down:"g",up:"G"}},classes:["symbol","letter"]},{code:"KeyH",value:{ru:{down:"р",up:"Р"},en:{down:"h",up:"H"}},classes:["symbol","letter"]},{code:"KeyJ",value:{ru:{down:"о",up:"О"},en:{down:"j",up:"J"}},classes:["symbol","letter"]},{code:"KeyK",value:{ru:{down:"л",up:"Л"},en:{down:"k",up:"K"}},classes:["symbol","letter"]},{code:"KeyL",value:{ru:{down:"д",up:"Д"},en:{down:"l",up:"L"}},classes:["symbol","letter"]},{code:"Semicolon",value:{ru:{down:"ж",up:"Ж"},en:{down:";",up:":"}},classes:["symbol","letter"]},{code:"Quote",value:{ru:{down:"э",up:"Э"},en:{down:"'",up:"'"}},classes:["symbol","letter"]},{code:"Enter",value:"Enter",classes:["special","enter"]},{code:"ShiftLeft",value:"Shift",classes:["special","shiftLeft"]},{code:"KeyZ",value:{ru:{down:"я",up:"Я"},en:{down:"z",up:"Z"}},classes:["symbol","letter"]},{code:"KeyX",value:{ru:{down:"ч",up:"Ч"},en:{down:"x",up:"X"}},classes:["symbol","letter"]},{code:"KeyC",value:{ru:{down:"с",up:"С"},en:{down:"c",up:"C"}},classes:["symbol","letter"]},{code:"KeyV",value:{ru:{down:"м",up:"М"},en:{down:"v",up:"V"}},classes:["symbol","letter"]},{code:"KeyB",value:{ru:{down:"и",up:"И"},en:{down:"b",up:"B"}},classes:["symbol","letter"]},{code:"KeyN",value:{ru:{down:"т",up:"Т"},en:{down:"n",up:"N"}},classes:["symbol","letter"]},{code:"KeyM",value:{ru:{down:"ь",up:"Ь"},en:{down:"m",up:"M"}},classes:["symbol","letter"]},{code:"Comma",value:{ru:{down:"б",up:"Б"},en:{down:",",up:"<"}},classes:["symbol","letter"]},{code:"Period",value:{ru:{down:"ю",up:"Ю"},en:{down:".",up:">"}},classes:["symbol","letter"]},{code:"Slash",value:{ru:{down:".",up:","},en:{down:"/",up:"?"}},classes:["symbol","letter"]},{code:"ArrowUp",value:"▲",classes:["special"]},{code:"ShiftRight",value:"Shift",classes:["special","shiftRight"]},{code:"ControlLeft",value:"Ctrl",classes:["special","controlLeft"]},{code:"MetaLeft",value:" ",classes:["special","metaLeft"]},{code:"AltLeft",value:"Alt",classes:["special"]},{code:"Space",value:" ",classes:["special","space"]},{code:"AltRight",value:"Alt",classes:["special"]},{code:"ContextMenu",value:" ",classes:["special","contextMenu"]},{code:"ArrowLeft",value:"◄",classes:["special"]},{code:"ArrowDown",value:"▼",classes:["special"]},{code:"ArrowRight",value:"►",classes:["special"]},{code:"ControlRight",value:"Ctrl",classes:["special","controlRight"]}],v=["Escape","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","Pause","Insert","Delete","Home","PageUp","PageDown","End"];window.onload=function(){new p(y,v).createKeyboardInstance()}}]);